// Explorer GUI program test

set/ actual_path = C:\CPCDOS\OS

// ===== Build window =====
Window/ file_explorer_window

        .title          = "File explorer GUi test"
        .parameters     = "TYPE:0 SIZ:1 SIZBTN:1"
        .px             = "50"
        .py             = "100"
        .sx             = "500"
        .sy             = "300"
        .opacity        = "255"
        .WindowColor    = "100,100,100"
        .TitleColor     = "255,200,100"
        .backcolor      = "100,100,100"
        .events         = "%_exe_path_%"

        @#window_handle create/
End/ Window

// ===== Build GUI objects in the window =====
picturebox/ img_Drive
	.handle		= "%window_handle%"
	.parameters	= "IMGAUTO:0"
	.PX		= "2"
	.PY		= "4"
	.sx		= "13"
	.sy		= "13"
	.Image		= "OS/MEDIA/GUI/MDRIVE.PNG"
	.opacity	= "255"
        .events         = "%_exe_path_%"
	create/
end/ Picturebox

picturebox/ img_Previous
	.handle		= "%window_handle%"
	.parameters	= "IMGAUTO:0"
	.PX		= "20"
	.PY		= "4"
	.sx		= "13"
	.sy		= "13"
	.Image		= "OS/MEDIA/GUI/PREV.PNG"
	.opacity	= "255"
        .events         = "%_exe_path_%"
	create/
end/ Picturebox

picturebox/ img_Next
	.handle		= "%window_handle%"
	.parameters	= "IMGAUTO:0"
	.PX		= "36"
	.PY		= "4"
	.sx		= "13"
	.sy		= "13"
	.Image		= "OS/MEDIA/GUI/NEXT.PNG"
	.opacity	= "255"
        .events         = "%_exe_path_%"
	create/
end/ Picturebox

Textbox/ txt_path
        .Handle         = "%window_handle%"
        .Parameters     = "BORD:1 COL:1"
        .Text           = "%actual_path%"
        .PX             = "52"
        .PY             = "4"
        .BackColor      = "100,100,100"
        .TextColor      = "250,250,250"
        .sx             = "300"
        .sy             = "18"
        .events         = "%_exe_path_%"
        create/
End/ Textbox

explorer/ explore_gui
        .handle         = "%window_handle%"
        .parameters     = ""
        .px             = "0"
        .py             = "23"
        .sx             = "500"
        .sy             = "300"
        .opacity        = "255"
        .textcolor      = "250,250,250"
        .backcolor      = "100,100,100"
        .text           = "%actual_path%"
        .events         = "%_exe_path_%"
        create/
End/ explorer

// ===== GUI events =====

Function/ img_Drive.clic()
        // Display drive list

End/ Function

Function/ img_Previous.clic()
        // Back path

End/ Function

Function/ img_Next.clic()
        // fordward path

End/ Function


Function/ txt_path.enter()
        // Valid and display wrote path from textbox

        // Getting path from textbox
        textbox/ /modif:txt_path
		@#path_text .text
	end/ textbox

        // Modify explorer path
	explorer/ /modif:explore_gui
		.text = "%path_text%"
		create/
	end/ explorer
End/ Function

Function/ file_explorer_window.Resize(sizeup)
	// If user change window size

	// Getting size informations of window
	window/ /modif:file_explorer_window
		@#Win_Size_X .sx
		@#Win_Size_Y .sy
	end/ window
	
        // According textbox size
        set/ Win_Size_Y = /C(%Win_Size_Y% - 23)

        // And modify explorer object size
	explorer/ /modif:explore_gui
		.sx     = "%Win_Size_X%"
		.sy     = "%Win_Size_Y%"
		create/
	end/ explorer

End/ function

Function/ file_explorer_window.Clic()
        // Update textbox path

        // Get path text
        explorer/ /modif:explore_gui
                @#new_path .text
        end/ explorer

        // Modify path text in the textbox
        textbox/ /modif:txt_path
		.text = "%new_path%"
		create/
	end/ textbox
End/ Function













